---
title: "特定のサイトで POST リクエストが失敗し、接続エラーが表示されます"
date: "2016-05-20T19:14:00-04:00"
categories: ["networking"]
tags: []
releases: ["46"]
statuses: "regressed"
references:
    - url: "https://bugzilla.mozilla.org/show_bug.cgi?id=1269055"
      title: "Bug 1269055 - RFE - auto retry failed POST"
---
Firefox 46 で途切れた接続の処理方法が変更され、POST など安全でないリクエストは自動的に再試行されなくなりました。しかしこの新たな挙動では様々なサイトがうまく動かず、「サーバーへの接続がリセットされました」というエラーページが表示されてしまいます。これは、サイトがブラウザーに対して POST リクエストについても接続の再試行を行うものと期待しているためです。日本で人気の Flash ゲーム「艦これ」が影響を受けることが判明しています。

この問題が引き起こされることはまれですが、Firefox 47 は相互運用性を最大限にすべく元の変更の一部を取り消し、接続が再利用されていた場合は従来通り途切れた接続を再試行するようにしました。

ウェブマスターはサーバーの持続接続タイムアウトを延期することでこの問題を回避できます。Firefox が HTTP/1.x に 115 秒、HTTP/2 に 180 秒を採用していることを考慮すると、サーバー側の推奨値はそれぞれ 120 秒以上、185 秒以上となります。
